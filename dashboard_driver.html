<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<title>Driver Dashboard</title>
<link rel="stylesheet" href="styles.css" />
</head>

<body>
<div class="container">
  <h2 class="title">Driver Dashboard</h2>

  <div class="card">
    <h3>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</h3>
    <div id="temp" class="value">--</div>
  </div>

  <div class="card">
    <h3>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h3>
    <div id="gps" class="value">--</div>
  </div>

  <button class="btn" onclick="updateGPS()">üìç ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏ñ</button>
</div>

<script type="module">
import { db, ref, onValue, set } from "./firebase-config.js";

onValue(ref(db, "Data/Temperature"), s => {
  document.getElementById("temp").textContent = s.val() + " ¬∞C";
});

onValue(ref(db, "Data/GPS"), s => {
  document.getElementById("gps").textContent = s.val().lat + ", " + s.val().lng;
});

// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï GPS ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡πÇ‡∏°‡πà
async function updateGPS() {
  const lat = 14.1234 + Math.random() * 0.01;
  const lng = 100.1234 + Math.random() * 0.01;

  await set(ref(db, "Data/GPS"), { lat, lng });
  alert("‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß!");
}
</script>
</body>
</html>
