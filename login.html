<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<title>Login - Smart Cold Chain</title>
<link rel="stylesheet" href="styles.css" />
</head>
<body>
<div class="main" style="max-width:400px; margin:auto; margin-top:100px;">
  <div class="card">
    <h2 class="title">Login</h2>
    <input id="username" placeholder="Username" />
    <input id="password" type="password" placeholder="Password" />
    <button class="btn" onclick="login()">เข้าสู่ระบบ</button>
  </div>
</div>

<script type="module">
import { db, ref, get } from './firebase-config.js';

async function login(){
  const u = document.getElementById("username").value.trim();
  const p = document.getElementById("password").value.trim();
  const snap = await get(ref(db, "users/"+u));
  if(!snap.exists()){ alert("ไม่พบผู้ใช้"); return; }
  const data = snap.val();
  if(data.password!==p){ alert("รหัสผ่านไม่ถูกต้อง"); return; }

  if(data.Role==="Seller") window.location="dashboard_seller.html";
  if(data.Role==="Driver") window.location="dashboard_driver.html";
  if(data.Role==="Buyer") window.location="dashboard_buyer.html";
}
</script>
</body>
</html>
