// src/App.js
import React, { useState, useEffect } from "react";
import MapView from "./components/MapView";
import TempChart from "./components/TempChart";
import HistoryTable from "./components/HistoryTable";
import AlertBanner from "./components/AlertBanner";

function App() {
  const [alert, setAlert] = useState(false);
  const [temp, setTemp] = useState(5);

  // ตัวอย่างเช็คค่าอุณหภูมิสำหรับ Alert
  useEffect(() => {
    if (temp > 7 || temp < 2) setAlert(true);
    else setAlert(false);
  }, [temp]);

  return (
    <div
      className="bg-blue-50 min-h-screen p-4"
      style={{
        backgroundImage: `url("/mnt/data/Screenshot 2025-08-15 220214.png")`,
        backgroundSize: "cover",
        backgroundBlendMode: "overlay",
      }}
    >
      <header className="bg-blue-700 text-white p-4 rounded mb-4">
        <h1 className="text-2xl font-bold">Smart Cool Dashboard</h1>
      </header>

      {alert && <AlertBanner />}

      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <MapView />
        <TempChart temp={temp} setTemp={setTemp} />
      </div>

      <div className="mt-4">
        <HistoryTable />
      </div>
    </div>
  );
}

export default App;
